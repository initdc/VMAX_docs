<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Lens Analysis Utility - V-Ray 2.0 for 3ds Max</title>

    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>


<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="917507">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">VRAY</span>
                    <img class="space-logo" src="spacelogo.png" />
                </h1>
                <a href="V-Ray_2.0_for_3ds_Max.html" class="ht-space-link">
                    <h2>V-Ray 2.0 for 3ds Max</h2>
                </a>
            </header>

            <nav class="ht-pages-nav">
                <ul class="ht-pages-nav-top">
                                                <li class="leaf">
        <a class="ht-nav-page-link" href="Getting_Started.html">Getting Started</a>

            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Licensing.html">Licensing</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="EULA.html">EULA</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="License_Server_Agreement.html">License Server Agreement</a>

            </li>
                            </ul>
            </li>
                                                <li class="leaf">
        <a class="ht-nav-page-link" href="Credits.html">Credits</a>

            </li>
                                                <li class="leaf">
        <a class="ht-nav-page-link" href="Migrating_from_V-Ray_1.5_to_V-Ray_2.0.html">Migrating from V-Ray 1.5 to V-Ray 2.0</a>

            </li>
                                                <li class="leaf">
        <a class="ht-nav-page-link" href="Features.html">Features</a>

            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Installation.html">Installation</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Installation_Troubleshooting.html">Installation Troubleshooting</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Silent_Install_and_Uninstall.html">Silent Install and Uninstall</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Uninstall_V-Ray.html">Uninstall V-Ray</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="V-Ray_Configuration.html">V-Ray Configuration</a>

            </li>
                            </ul>
            </li>
                                                <li class="leaf">
        <a class="ht-nav-page-link" href="Licensing_System.html">Licensing System</a>

            </li>
                                                <li class="leaf">
        <a class="ht-nav-page-link" href="Troubleshooting.html">Troubleshooting</a>

            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="V-Ray_and_3ds_Max.html">V-Ray and 3ds Max</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="MaxScript.html">MaxScript</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Texture_Baking.html">Texture Baking</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Unsupported_3ds_Max_Features.html">Unsupported 3ds Max Features</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Render_Elements.html">Render Elements</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="G-Buffer_Support.html">G-Buffer Support</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Hair_&amp;_Fur.html">Hair &amp; Fur</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="V-Ray_RT.html">V-Ray RT</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="V-Ray_RT_FAQ.html">V-Ray RT FAQ</a>

            </li>
                            </ul>
            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Plugins.html">Plugins</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Rendering.html">Rendering</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Â V-Ray_Frame_Buffer.html">&nbsp;V-Ray Frame Buffer</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Global_Switches.html">Global Switches</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Image_Sampler_(Antialiasing).html">Image Sampler (Antialiasing)</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Indirect_Illumination_(GI).html">Indirect Illumination (GI)</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Brute_Force_GI.html">Brute Force GI</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Irradiance_Map.html">Irradiance Map</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Global_Photon_Map.html">Global Photon Map</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Light_Cache.html">Light Cache</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Caustics.html">Caustics</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Environment.html">Environment</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="DMC_Sampler.html">DMC Sampler</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Color_Mapping.html">Color Mapping</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Camera.html">Camera</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Default_Displacement.html">Default Displacement</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="System.html">System</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Presets.html">Presets</a>

            </li>
                            </ul>
            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Materials.html">Materials</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayMtl.html">VRayMtl</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRay2SidedMtl.html">VRay2SidedMtl</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayOverrideMtl.html">VRayOverrideMtl</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayLightMtl.html">VRayLightMtl</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayMtlWrapper.html">VRayMtlWrapper</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayFastSSS.html">VRayFastSSS</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayFastSSS2.html">VRayFastSSS2</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayBlendMtl.html">VRayBlendMtl</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRaySimbiontMtl.html">VRaySimbiontMtl</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayCarPaintMtl.html">VRayCarPaintMtl</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayFlakesMtl.html">VRayFlakesMtl</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayOSLMtl.html">VRayOSLMtl</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayHairMtl.html">VRayHairMtl</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayGLSLMtl.html">VRayGLSLMtl</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Textures.html">Textures</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRaySun_and_VRaySky.html">VRaySun and VRaySky</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayDirt.html">VRayDirt</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayColor.html">VRayColor</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayMap.html">VRayMap</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayHDRI.html">VRayHDRI</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayEdgesTex.html">VRayEdgesTex</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayBmpFilter.html">VRayBmpFilter</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayCompTex.html">VRayCompTex</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayDistanceTex.html">VRayDistanceTex</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayGLSLTex.html">VRayGLSLTex</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayOSLTex.html">VRayOSLTex</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayMultiSubTex.html">VRayMultiSubTex</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayPtex.html">VRayPtex</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayHairInfoTex.html">VRayHairInfoTex</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayColor2Bump.html">VRayColor2Bump</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRaySky.html">VRaySky</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRaySoftBox.html">VRaySoftBox</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Lighting.html">Lighting</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayLight.html">VRayLight</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRaySun.html">VRaySun</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayIES_light.html">VRayIES light</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayAmbientLight.html">VRayAmbientLight</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Geometry.html">Geometry</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayFur.html">VRayFur</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayProxy.html">VRayProxy</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayPlane.html">VRayPlane</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="Miscellaneous_Plugins.html">Miscellaneous Plugins</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayShadow.html">VRayShadow</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayShadowMap.html">VRayShadowMap</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayDisplacementMod.html">VRayDisplacementMod</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayToon.html">VRayToon</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayEnvironmentFog.html">VRayEnvironmentFog</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayPhysicalCamera.html">VRayPhysicalCamera</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRaySphereFade.html">VRaySphereFade</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayStereoscopic.html">VRayStereoscopic</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayStereoRig.html">VRayStereoRig</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayLensEffects.html">VRayLensEffects</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayLightMeter.html">VRayLightMeter</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayExposureControl.html">VRayExposureControl</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayBPTracer.html">VRayBPTracer</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayOrnatrixMod.html">VRayOrnatrixMod</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="VRayHairFarmMod.html">VRayHairFarmMod</a>

            </li>
                            </ul>
            </li>
                            </ul>
            </li>
                                                <li class="leaf">
        <a class="ht-nav-page-link" href="Object_and_Light_Properties.html">Object and Light Properties</a>

            </li>
                                                <li class="leaf">
        <a class="ht-nav-page-link" href="Distributed_Rendering.html">Distributed Rendering</a>

            </li>
                                                <li class="leaf">
        <a class="ht-nav-page-link" href="GLSL_Support.html">GLSL Support</a>

            </li>
                                                <li class="leaf">
        <a class="ht-nav-page-link" href="OSL_Support.html">OSL Support</a>

            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Tools.html">Tools</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Irradiance_Map_Viewer.html">Irradiance Map Viewer</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href=".obj_and_.ply_to_.vrmesh_Converter_.html">.obj and .ply to .vrmesh Converter*</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href=".vrimg_to_.exr_Converter.html">.vrimg to .exr Converter</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Image_to_Tiled_Multiresolution_OpenEXR_Converter.html">Image to Tiled Multiresolution OpenEXR Converter</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="V-Ray_Scene_Exporter.html">V-Ray Scene Exporter</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link current" href="Lens_Analysis_Utility.html">Lens Analysis Utility</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Filter_Generator.html">Filter Generator</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Tutorials.html">Tutorials</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Irradiance_Map_Modes__Rendering_a_Static_Scene_from_Multiple_Views.html">Irradiance Map Modes: Rendering a Static Scene from Multiple Views</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Rendering_a_Walk-Through_Animation.html">Rendering a Walk-Through Animation</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Photon_Mapping.html">Photon Mapping</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Displacement_Mapping.html">Displacement Mapping</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Rendering_an_Interior_Scene.html">Rendering an Interior Scene</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Progressive_Path_Tracing_with_V-Ray.html">Progressive Path Tracing with V-Ray</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Rendering_Surface_Interfaces.html">Rendering Surface Interfaces</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Rendering_an_Animation_with_Moving_Objects.html">Rendering an Animation with Moving Objects</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Rendering_an_Animation_with_Moving_Objects_II.html">Rendering an Animation with Moving Objects II</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Basic_Texture_Baking_with_V-Ray,_Part_I.html">Basic Texture Baking with V-Ray, Part I</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Universal_V-Ray_Settings.html">Universal V-Ray Settings</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Rendering_PTex_Textures_from_Mudbox.html">Rendering PTex Textures from Mudbox</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="Theory.html">Theory</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="Raytracing_Overview.html">Raytracing Overview</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="GI_Methods.html">GI Methods</a>

            </li>
                            </ul>
            </li>
                                                <li class="leaf">
        <a class="ht-nav-page-link" href="Terminology.html">Terminology</a>

            </li>
                                                <li class="leaf">
        <a class="ht-nav-page-link" href="Frequently_Asked_Questions.html">Frequently Asked Questions</a>

            </li>
                                    </ul>
            </nav>
        </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="V-Ray_2.0_for_3ds_Max.html">V-Ray 2.0 for 3ds Max</a></li>
                                                                                     <li><a href="Tools.html">Tools</a></li>
                                                            </ul>
</div>            <h1 id="src-2557641"> <span>Lens Analysis Utility</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-2557641_LensAnalysisUtility-Overview">Overview</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-2557641_LensAnalysisUtility-BasicWorkflow">Basic Workflow</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-2557641_LensAnalysisUtility-PrintingaCalibrationChart">Printing a Calibration Chart</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-2557641_LensAnalysisUtility-PhotographingtheCalibrationChart">Photographing the Calibration Chart</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-2557641_LensAnalysisUtility-AnalyzingtheCalibrationPhotos">Analyzing the Calibration Photos</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-2557641_LensAnalysisUtility-UsingVRLENSProfilesin3dsMax">Using VRLENS Profiles in 3ds Max</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-2557641_LensAnalysisUtility-ModifyingLensProfileData">Modifying Lens Profile Data</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-2557641_LensAnalysisUtility-TestCorrectionUtility">Test Correction Utility</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-2557641_safe-id-TGVuc0FuYWx5c2lzVXRpbGl0eS1BcmJpdHJhcnlJbWFnZUNvcnJlY3Rpb24vRGlzdG9ydGlvblV0aWxpdHk">Arbitrary Image Correction/Distortion Utility</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-2557641_LensAnalysisUtility-General">General</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-2557641_LensAnalysisUtility-Options">Options</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-2557641_safe-id-TGVuc0FuYWx5c2lzVXRpbGl0eS1Db3JyZWN0aW5nL0Rpc3RvcnRpbmdVc2luZ2FQcmltZUxlbnNQcm9maWxl">Correcting/Distorting Using a Prime Lens Profile</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-2557641_LensAnalysisUtility-AFullZoomLensProfile">A Full Zoom Lens Profile</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-2557641_safe-id-TGVuc0FuYWx5c2lzVXRpbGl0eS1Db3JyZWN0aW9uL0Rpc3RvcnRpb25VdGlsaXR5TGltaXRhdGlvbnM6">Correction/Distortion Utility Limitations:</a>    </p>
</li></ul></li></ul>    <div class="section section-1" id="src-2557641_LensAnalysisUtility-Overview">
        <h1 class="heading "><span>Overview</span></h1>
    <p  >The lens analysis utility is the primary tool we supply for creating, previewing and editing of V-Ray lens files (*.vrlens), and contains a camera distortion analyzer, and a tool for correcting/distorting images. The VRLENS files can be used in 3ds Max, Maya etc. to provide realistic (measured) camera distortion (as opposed to the simple quadratic and cubic modes). The VRLENS format also supports zoom lenses, and the distortion parameters are linked to the focal length of the V-Ray Physical Camera. So, as the camera is zoomed in and out, the distortion parameters are automatically varied. This provides for a very realistic level of camera distortion simulation.    </p>
    </div>
    <div class="section section-1" id="src-2557641_LensAnalysisUtility-BasicWorkflow">
        <h1 class="heading "><span>Basic Workflow</span></h1>
    <p  >V-Ray lens files are created with the lens analysis utility, from a set of calibration images, photographed with the camera we want to measure. The general work-flow to produce a .VRLENS file for a particular camera (or a particular lens, if the lenses are interchangeable) is like this:    </p>
    <p  class="tutsteps">1. A calibration chart file is created by the utility, by selecting Analysis &rarr; Print Test Chart....The utility outputs a PostScript (PS) formatted file. PS is a standard printer format, which can be easily converted to PDF via the ps2pdf utility (where applicable), or through an online service, <a  class="external-link" href="http://www.ps2pdf.com/">http://www.ps2pdf.com/</a>    </p>
    <p  class="tutsteps">2. The calibration chart is printed to a sheet of paper, which is later photographed with the camera to be analyzed.    </p>
    <p  class="tutsteps">3. The image files from the camera are downloaded to a computer, where they are processed with the lens analysis utility: first, the photos are added    <span style="color: #000000;">
 (with the <strong class=" ">Add photos...</strong> button) to the lens profile and then analyzed (by clicking <strong class=" ">Analyze...).</strong>    </span>
    </p>
    <p  class="tutsteps">4. The analyzed lens profile is saved (by selecting Profile &rarr; Save Profile) to disk. The .VRLENS file is ready to be used in 3ds Max, Maya, etc.    </p>
    </div>
    <div class="section section-1" id="src-2557641_LensAnalysisUtility-PrintingaCalibrationChart">
        <h1 class="heading "><span>Printing a Calibration Chart</span></h1>
    <p  >    <img  class="confluence-embedded-image image-right" src="images/download/attachments/2557641/LensAnalysis_1.png" alt="images/download/attachments/2557641/LensAnalysis_1.png"   />
        </p>
    <p  >From Analysis &rarr; Print Test Chart..., you should choose the aspect ratio of the camera (the image sensor, or that of the film gate). Using the correct ratio is beneficial for the accuracy of the    <span style="color: #000000;">
 method. Pressing the <strong class=" ">View...</strong> button    </span>
 will open the generated PS file in your default PostScript viewer (under Windows, you may need to install one &ndash;for example, the freeware GSview). You may also choose     <span style="color: #000000;">
<strong class=" ">Save</strong>    </span>
 and convert the resulting PostScript file to PDF via the online service <a  class="external-link" href="http://www.ps2pdf.com/">http://www.ps2pdf.com/.</a> Both ways work. The chart is then to be printed to a sheet of clean white paper (size is not important, A4/Letter is OK). The grid lines need to be straight and free from defects (e.g., gaps, scratches and other irregularities). The illustration below shows an example calibration chart.    </p>
    <p  >    <img  class="confluence-embedded-image" src="images/download/attachments/2557641/LensAnalysis_2.jpg" alt="images/download/attachments/2557641/LensAnalysis_2.jpg"   />
        </p>
    </div>
    <div class="section section-1" id="src-2557641_LensAnalysisUtility-PhotographingtheCalibrationChart">
        <h1 class="heading "><span>Photographing the Calibration Chart</span></h1>
    <p  >The printed chart should be placed on a flat surface (wall, whiteboard) and pinned/taped/glued so that it is tense and without any bumps. The camera is to be placed directly in front of the chart, so the photograph to be taken contains the whole grid and just a bit of margin around it. Ideally, the four L-shaped corners should correspond to the corners of the photograph, but it doesn't hurt if they don't &ndash; it is fine as long as the whole grid is present and it doesn't come too close (e.g., a few pixels) of the image edges. The image center should be the black dot in the middle of the grid (the software is picky about that &ndash;only 1.5 boxes of offset is enough to have your image rejected). Pay great attention to the placement of the camera, it should be directly in front of the chart, and should point in a direction precisely perpendicular to the sheet. Even a small offset will introduce a perspective distortion, which greatly reduces the accuracy of the analysis (and therefore the software is extremely picky about this). Other things you should pay attention to:    </p>
<ul class=" "><li class=" ">    <p  >Enough illumination should be provided, to ensure fast shutter speeds when using suitable ISO settings (to eliminate the possibility for motion blur or excessive noise levels).    </p>
</li><li class=" ">    <p  >Correct focusing. Fuzzy images might be hard to analyze.    </p>
</li><li class=" ">    <p  >Image resolution: 2 megapixels is sufficient. The utility gladly accepts larger images, but they don't provide better accuracy.    </p>
</li><li class=" ">    <p  >No RAW files &ndash; the utility only accepts the range of image formats supported by V-Ray &ndash;this excludes all RAW image formats. JPEG is sufficient for the purposes of the analysis.    </p>
</li></ul>    <p  >    </p>
    <p  class="group"><strong class=" ">Prime vs Zoom Lenses</strong>    </p>
    <p  >For a prime lens (i.e., a lens with fixed focal length), you only need one photograph of the calibration chart (but you are encouraged to take more shots as outlined in the hints; see below). For a zoom lens, you need several photographs at various zoom levels to build a complete profile of the lens (V-Ray will interpolate the distortion parameters during rendering, so a few photos are sufficient). This means you have to re-adjust the zooming of the lens, and the camera position several times and make a photograph at each focal length. These calibration photos should cover the entire lens range. The amount of calibration photos required for an accurate profile is somewhat variable and depends on the type of lens and your needs. A simple rule that you might find useful is to consider the zoom factor of the lens and use the same amount (rounded to integer) of calibration focal lengths. E.g., to profile a 28-135mm lens, which has a zoom factor of around 5 (135/28 &asymp; 4.82 &asymp; 5), you need 5 photos spaced evenly in the 28-135 range. On more wide-angle lenses, where the distortion is usually more prominent in the wide end of the zoom range (and the parameters there change faster), it makes more sense to concentrate more photos in the wide end. E.g., to cover a 18-55 lens, an example calibration progression could be 18mm, 24mm, 30mm, 40mm, 55mm.    </p>
    <p  >In our tests at Chaos Software, creating lens profiles proved to be a tedious job, so you may find these hints useful:    </p>
<ul class=" "><li class=" ">    <p  >Most important of all, it is strongly recommended to use a tripod during the photography. It eliminates many of the factors that may ruin your images to the point they get rejected by the lens analysis utility.    </p>
</li><li class=" ">    <p  >Take a few photos at each focal length for redundancy reasons. The utility will later assign a score to each photo, so you can easily choose which images to keep or discard.    </p>
</li><li class=" ">    <p  >The utility may reject a photo for various reasons, but the most common is because of existing perspective distortion. It means that the camera wasn't directly in front of the center of the calibration chart during the shot. You must redo the photography in that case.    </p>
</li><li class=" ">    <p  >Keep in mind that the viewfinders of cameras do not usually cover 100% of the real image, but crop out some of it. Thus, if you target for 100% coverage in the viewfinder, you may later find out that you've left a margin around the grid that is needlessly large. You need to experiment to find the best shooting conditions.    </p>
</li><li class=" ">    <p  >If your viewfinder has a &ldquo;central&rdquo;focusing point or mark, keep in mind that it may not coincide with the true image center. You can derive the correcting offset you need to apply through some experimentation.    </p>
</li><li class=" ">    <p  >Avoid using direct (non-bounced) flash. It tends to overexpose some parts of the image, so some of the grid lines may be washed out to full white.    </p>
</li><li class=" ">    <p  >If you really need to get some images accepted, you can tune the error thresholds using Analysis &rarr; Error Thresholds.... This is a last-resort solution, don't use it if possible.    </p>
</li></ul>    </div>
    <div class="section section-1" id="src-2557641_LensAnalysisUtility-AnalyzingtheCalibrationPhotos">
        <h1 class="heading "><span>Analyzing the Calibration Photos</span></h1>
    <p  >The photos from the camera are transferred to the PC and processed with our lens analyzer tool. First, you should click on the <strong class=" ">Add Photos...</strong> button and import the calibration photos (for a zoom lens, the software may ask you to provide the focal lengths of the photographs if it isn't able to fetch them from image metadata. In this case you need to supply the correct focal length for each photo, as otherwise the profile will be incomplete). Then, click on the <strong class=" ">Analyze...</strong> button. As the images are processed, the utility will print out a statistic for each file: whether the analysis is successful or not, the error message if it fails, and a quality rating (like &ldquo;perfect&rdquo;, &ldquo;very good&rdquo;etc), based on the following performance criteria:    </p>
<ul class=" "><li class=" ">    <p  ><strong class=" ">Inter-central distance</strong>: distance between the true image center and the central bud of the grid in the photo. Less than 70% of cell size is considered OK.    </p>
</li><li class=" ">    <p  ><strong class=" ">Perspective distortion</strong>: this measures how much the grid outline differs from an ideal rectangle. More than 2% of deformation is deemed unacceptable.    </p>
</li><li class=" ">    <p  ><strong class=" ">Central angle</strong>: a measure of the angle between orthogonal lines near the grid center. If they are off by more than 0.5&deg; from a straight angle, image is rejected.    </p>
</li><li class=" ">    <p  ><strong class=" ">Grid misalignment</strong>: The rotation of the grid in respect to the image. Anything below 10&deg; is OK.    </p>
</li></ul>    <p  >If the utility rejects photograph for a reason other than those four criteria, it may be helpful to turn on the detection-stage preview from Analysis &rarr; Show Detection Details and retry analysis. The preview may give you a hint why the detection finds the image difficult. After the analysis phase, the table describing the profile is populated with the detected distortion parameters of all successfully analyzed photos.    </p>
    <p  >Note: if you followed the advice to take several redundant photos for each focal length, you can now either trim the profile manually by removing the inferior photos, as judged by the analyzer, or by using the automated merging tool accessible from Analysis &rarr; Consolidate Profile. &ldquo;Consolidate profile&rdquo; does not just remove the redundant photos &ndash;it averages the parameters of any calibration photos with the same focal length, so it is theoretically optimal. In either case, the final profile must have only a single set of parameters per each focal length. The table contains the following fields:    </p>
<ul class=" "><li class=" ">    <p  ><strong class=" ">Calibration photo</strong>: this is the path to the analyzed image file. It exists for your convenience only. The profile works fine if the file does no longer exist (or if the profile is transferred to another machine &ndash;it does not matter that it lacks the photo files)    </p>
</li><li class=" ">    <p  ><strong class=" ">Focal length</strong>: This is the focal length of the photograph. Depending on the type of lens, this parameter may be important or not:    </p>
<ul class=" "><li class=" ">    <p  ><strong class=" ">Prime lenses:</strong> since a prime lens would ultimately have only one table entry, it is not important what the focal length field will hold (may even be empty). The profile will work anyway.    </p>
</li><li class=" ">    <p  ><strong class=" ">Zoom lenses</strong>: it is important to have a focal length per each set of distortion parameters (i.e., each entry in the table). Here you need to adopt a consistent &ldquo;focal length framework&rdquo;, because there are several incompatible choices:    </p>
<ul class=" "><li class=" ">    <p  >35mm-equivalent focal length framework, whereas any real (optical) focal length is converted to the equivalent focal length in 35mm film. E.g., on a Canon APS-C sensor body (where the image sensor diagonal is 1.6 times smaller than the 35-mm system's diagonal), the crop factor is 1.6x, and a 50mm lens mounted on a APS-C body behaves as a 80mm lens on a full-frame body utilizing 35mm film (80 = 50 x 1.6). This framework works well with the V-Ray physical camera, as it also mimics a 35mm camera.    </p>
</li><li class=" ">    <p  >Actual (optical) focal length framework, where the crop factor multiplication is not done. All recorded focal lengths correspond to direct lens settings. In this mode, it may be beneficial to alter the physical camera defaults to reflect the exact properties of your camera (e.g., to be able to get the same field of view, etc.) The lens utility prefers the first system, and tries to calculate the 35mm-equivalent focal length of your photographs from EXIF metadata, contained in the images (JPEG and TIFF files only). If this data is not present, but information about the optical focal length is available instead, the lens utility will use the latter, after issuing a warning about that.    </p>
</li></ul></li></ul></li><li class=" ">    <p  ><strong class=" ">K0</strong>: This parameter controls image scaling. Should be very close to 1 in most cases.    </p>
</li><li class=" ">    <p  ><strong class=" ">K1</strong>: This parameter represents the first-order symmetric (radial) distortion coefficient and is the primary indicator of the type of distortion (it will also be the most variable parameter throughout the zoom range). It is typically around 0, with positive values indicating barrel distortion, and negative indicating pincushion distortion.    </p>
</li><li class=" ">    <p  ><strong class=" ">K2</strong>: Some very wide-angle lenses have such distortion characteristics near the edges of the frame that are impossible to capture using the first-order coefficient alone, and thus require a second-order coefficient. K2 is also symmetric. On most moderate lenses, this parameter would be very close to 0.    </p>
</li><li class=" ">    <p  ><strong class=" ">Squeeze (Sqz)</strong>: This parameter captures the asymmetrical features of the lens due to the image being stretched in X or Y direction. Should be around 1 in most cases.    </p>
</li><li class=" ">    <p  ><strong class=" ">&lambda;x (Lx)</strong>: Captures the asymmetrical distortion along the X direction. Usually 0.    </p>
</li><li class=" ">    <p  ><strong class=" ">&lambda;y (Ly)</strong>: Same as &lambda;x, but along the Y direction.    </p>
</li></ul>    <p  >Note: The primary determining parameter is K1. All other parameters will be close to their default (&ldquo;no-distortion&rdquo;) values, but since the photographed grid can never be analyzed with absolute precision, some &ldquo;noise&rdquo; is expected to exist in the parameters. Further, when both K1 and K2 are nearly zero, the other parameters lose their significance and may fluctuate widely. In short, do not pay great attention if the parameters are not quite at their expected values &ndash;this doesn't mean there is a flaw in your lenses.    </p>
    </div>
    <div class="section section-1" id="src-2557641_LensAnalysisUtility-UsingVRLENSProfilesin3dsMax">
        <h1 class="heading "><span>Using VRLENS Profiles in 3ds Max</span></h1>
    <p  >After you've produced acceptable calibration photos for each focal length and the analysis is done, you then need to save the profile to a file (Profile &rarr; Save Profile). We use the .vrlens extension for these files. Note that this is different from the .lens extension, which we also support in 3ds Max.    </p>
    <p  >When saving the profile, the lens analysis utility may emit a warning if the current data is not suitable for production use &ndash;be it because of missing focal length information, or because there are several calibration photos for a single focal length, or because some of the images aren't analyzed. You should rectify these issues before creating a working .VRLENS file.    </p>
    <p  >The VRLENS files are small and simple; they don't depend on other files or resources &ndash;using them in a DR should be straightforward.    </p>
    <p  >To apply a VRLENS file for a measured camera distortion simulation in 3ds Max, you need to use the <a   href="VRayPhysicalCamera.html">V-Ray Physical Camera</a>. From the camera's settings, go to the &ldquo;Distortion&rdquo; rollout, use &ldquo;Lens file&rdquo;distortion type and click on Lens file to select it.    </p>
    </div>
    <div class="section section-1" id="src-2557641_LensAnalysisUtility-ModifyingLensProfileData">
        <h1 class="heading "><span>Modifying Lens Profile Data</span></h1>
    <p  >In the lens analysis utility:    </p>
<ul class=" "><li class=" ">    <p  >You may change a focal length data (or enter one) by double-clicking on the respective cell in the table    </p>
</li><li class=" ">    <p  >You may change the distortion parameters by double-clicking on any of the parameter cells. If the image calibration file is present in your system, you will have a detailed preview of the &ldquo;destination&rdquo;, straight grid of points (represented by small blue circles) and the detected grid intersection points after the correction (represented by small red crosses). The objective is to tune the parameters in such a way so the red crosses coincide with the blue circles. You can zoom the preview by holding the right mouse button in the preview area and moving the mouse up or down. You can pan by holding the left mouse button and moving the mouse. The parameters are present in the bottom of the dialog and you can change by typing their values directly, or by clicking on the arrows, associated with each parameter (the values will be incremented or decremented based on the &ldquo;tuning precision&rdquo;setting). Note: if the calibration photo is unavailable, a simpler dialog with no preview will appear.    </p>
</li></ul>    </div>
    <div class="section section-1" id="src-2557641_LensAnalysisUtility-TestCorrectionUtility">
        <h1 class="heading "><span>Test Correction Utility</span></h1>
    <p  >You can see an example of how an &ldquo;un-distorted&rdquo;image will look like by selecting one of the calibration images (just click on its name) and selecting Correction &rarr; Test correction. This will correct the calibration photo using the detected distortion parameters. You can switch between the corrected and original file for comparison.    </p>
    </div>
    <div class="section section-1" id="src-2557641_safe-id-TGVuc0FuYWx5c2lzVXRpbGl0eS1BcmJpdHJhcnlJbWFnZUNvcnJlY3Rpb24vRGlzdG9ydGlvblV0aWxpdHk">
        <h1 class="heading "><span>Arbitrary Image Correction/Distortion Utility</span></h1>
    <p  >You may correct or distort an array of arbitrary image files using Correction &rarr; Correct/Distort images.... Thus, a &ldquo;perfect&rdquo; image (e.g., from a render with no distortion whatsoever) can be distorted to match the characteristics of a measured camera, or, an image sequence shot by a real camera can be corrected so it matches the quality of a theoretical &ldquo;perfect&rdquo;camera.    </p>
    <p  >This utility uses the complete lens profile, so, for zoom lenses, it calculates the needed distortion parameters per each image, in a manner similar to the way it is done in the V-Ray Physical camera during rendering. As a consequence of this, you need the focal lengths of each image that is going to be corrected or distorted, otherwise the parameters cannot be correctly interpolated. The utility would try to infer this from EXIF metadata; when that fails, it will present you with several choices, see below.    </p>
    <p  >    </p>
    <div class="section section-2" id="src-2557641_LensAnalysisUtility-General">
        <h2 class="heading group"><span>General</span></h2>
    <p  >    <img  class="confluence-embedded-image" src="images/download/attachments/2557641/LensAnalysis_3.png" alt="images/download/attachments/2557641/LensAnalysis_3.png"   />
        </p>
    <p  >Here you s    <span style="color: #000000;">
elect the images to be processed. Use <strong class=" ">Add file...</strong> to add individual files, or <strong class=" ">Add directory...</strong> for a whole directory, possibly including the full directory hierarchy below the selected one. Please note that the hierarchy will not be preserved in the output directory in that case. The output directory indicates where the processed files are to be stored, and you can select the direction of the process here. When you're all set up, click <strong class=" ">Process.</strong>    </span>
    </p>
    <p  >    </p>
    </div>
    <div class="section section-2" id="src-2557641_LensAnalysisUtility-Options">
        <h2 class="heading group"><span>Options</span></h2>
    <p  >    <img  class="confluence-embedded-image" src="images/download/attachments/2557641/LensAnalysis_4.png" alt="images/download/attachments/2557641/LensAnalysis_4.png"   />
        </p>
    <p  >Here you can tweak various parameters regarding the process:    </p>
    <p  >    <span style="color: #000000;">
<strong class=" ">Resampling quality</strong> - you can choose the image re sampling function - choices are Nearest neighbor, Bilinear, or Area, which are a quality/speed trade off. Bilinear is fast and adequate for most purposes, so it is the default.    </span>
    </p>
    <p  >    <span style="color: #000000;">
<strong class=" ">Use alternative resampling algorithm (slower)</strong> - This is only meaningful when using Nearest neighbor or Bilinear resampling and the processing direction is Undistort. Because of the mathematics involved in the distortion/undistortion formulas, it is much faster to transform an image in the &ldquo;distort&rdquo; direction. However, the &ldquo;undistort&rdquo;direction can still be achieved using the same internal machinery, but with inverting the image transfer function. This approach uses somewhat more memory and in some extreme cases could introduce image artifacts. This option should be mostly left unchecked; if the image quality is unacceptable, you may try to turn this option on and see if the quality improves.    </span>
    </p>
    <p  >    <span style="color: #000000;">
<strong class=" ">Use XXX threads for processing</strong> - The image process is naturally multithreaded and will use all the processing power available in the system. Here you can tweak the number of working threads. Note: the amount of memory required for processing is proportional to the number of threads. With a lot of threads and when working with large images, your system may end up consuming all the memory available, and some of the images will not be processed in result. The situation can be alleviated by lowering the number of threads.    </span>
    </p>
    <p  >    <span style="color: #000000;">
<strong class=" ">Low thread priority</strong> - use below-normal worker thread priority, giving more CPU time to other running tasks.    </span>
    </p>
    <p  >    <span style="color: #000000;">
<strong class=" ">Output file format </strong>- select the output image format. By default, it is the same as the format of the source images    </span>
    </p>
    <p  >    <span style="color: #000000;">
<strong class=" ">EXR settings, PNG settings, JPEG settings, TIFF settings</strong> - control    </span>
 various parameters used when writing the corresponding image types.    </p>
    <p  >    </p>
    </div>
    <div class="section section-2" id="src-2557641_safe-id-TGVuc0FuYWx5c2lzVXRpbGl0eS1Db3JyZWN0aW5nL0Rpc3RvcnRpbmdVc2luZ2FQcmltZUxlbnNQcm9maWxl">
        <h2 class="heading group"><span>Correcting/Distorting Using a Prime Lens Profile</span></h2>
    <p  >With a profile of a prime lens, all images will be processed with the same set of distortion parameters, so no further complications can arise.    </p>
    <p  class="group">A zoom lens profile, but with distortion parameters from a single calibration photo    </p>
    <p  >If you have several entries in the table (e.g., the profile of a zoom lens), click on the entry you want to use for correction/distortion. Then, at the &ldquo;Options&rdquo;tab of the Correct/Distort utility, another item will ap    <span style="color: #000000;">
pear: <strong class=" ">Use selected profile</strong> settings and <strong class=" ">Use entire profile</strong><strong class=" ">.</strong> I    </span>
f you select the former, then your images will be processed using the specified parameters only. As this situation is otherwise identical to the &ldquo;Prime lens&rdquo;scenario, no complications can arise either.    </p>
    <p  >    </p>
    </div>
    <div class="section section-2" id="src-2557641_LensAnalysisUtility-AFullZoomLensProfile">
        <h2 class="heading group"><span>A Full Zoom Lens Profile</span></h2>
    <p  >This is the most complex situation, where you have a full zoom lens profile, having different distortion parameters at various focal lengths, and you want to process an array of images, which can also have various focal lengths. So, before starting the actual image processing, the utility will first try to read the EXIF metadata from all input images. If some of the images don't have EXIF, or the focal length information isn't written in there, the utility will give you the following choices:    </p>
<ul class=" "><li class=" ">    <p  >Don't process (skip): this option will skip any files that don't have focal length info.    </p>
</li><li class=" ">    <p  >Use specific parameters: use only a specific entry of the zoom lens profile (this is the same as the previous scenario) and essentially assume that all input images are of that specific focal length    </p>
</li><li class=" ">    <p  >Assume the focal length is: this is similar to the previous option, but allows you to specify any focal length; it is not confined to the focal lengths present in the profile    </p>
</li><li class=" ">    <p  >Specify focal lengths from file: supply a text file that lists the assumed focal length of each input file. That text file needs to be in the following format:    </p>
</li></ul>    <p  >    </p>
    <p  class="mxscode">&quot;Image_0001.exr&quot; 35.6    </p>
    <p  class="mxscode">&quot;Image_0002.exr&quot; 36.2    </p>
    <p  class="mxscode">&quot;Image_0003.exr&quot; 38.0    </p>
    <p  class="mxscode">    </p>
    <p  >&hellip;i.e.    </p>
    <p  >    </p>
    <p  class="mxscode">&quot;&laquo;file name&raquo;&quot; &laquo;focal length&raquo;    </p>
    <p  >    </p>
    <p  >with one file per line.    </p>
    <p  >    </p>
    </div>
    <div class="section section-2" id="src-2557641_safe-id-TGVuc0FuYWx5c2lzVXRpbGl0eS1Db3JyZWN0aW9uL0Rpc3RvcnRpb25VdGlsaXR5TGltaXRhdGlvbnM6">
        <h2 class="heading group"><span>Correction/Distortion Utility Limitations:</span></h2>
<ul class=" "><li class=" ">    <p  >The correction utility cannot preserve directory hierarchies; the output files are written &ldquo;flat&rdquo;in the output directory.    </p>
</li><li class=" ">    <p  >Only the color and alpha channels are supported. Image files containing a number of channels embedded in them (e.g., holding separate V-Ray Render Elements) will not be supported fully, and channels other than RGB and Alpha will be discarded.    </p>
</li><li class=" ">    <p  >Reading of .PSD and .VRIMG (V-Ray Image File) is supported, but writing is currently not.    </p>
</li></ul>    <p  >    </p>
    <p  >    </p>
    </div>
    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="V-Ray_Scene_Exporter.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>V-Ray Scene Exporter</span>
        </a>
                <a href="Filter_Generator.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Filter Generator</span>
        </a>
    </nav>    
            
            <article id="html-search-results" class="ht-content" style="display: none;">
            <header class="ht-content-header">
                <div id="ht-spacetitle">
                    <ul>
                        <li><a href="V-Ray_2.0_for_3ds_Max.html">V-Ray 2.0 for 3ds Max</a></li>
                    </ul>
                </div>
                <h1>Search results</h1>
            </header>
            <div id="search-results"></div>
        </article>
    
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

</body>
</html>
